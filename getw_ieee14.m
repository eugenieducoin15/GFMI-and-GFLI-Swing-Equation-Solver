function w_gfl = getw_ieee14(bus, n_gfm, n_gfl, x, w_sym)
if bus ~= 0
%     for i = 1:n_gfm
%         dd(i,1)=x(i);
%         d(i+n_gfm+n_gfl,1)=x(i+n_gfm+n_gfl);
%     end
%     for i = n_gfm+1:n_gfm+n_gfl
%         dii(i,1)=x(i);
%         ii(i+n_gfm+n_gfl,1)=x(i+n_gfm+n_gfl);
%     end
%         w_gfl = eval(w_str(bus-n_gfm));
        if 1 %isnan(w_gfl) || w_gfl == 0
            dc1 = sym('dc1');
            dc2 = sym('dc2');
            dc3 = sym('dc3');
            dc4 = sym('dc4');
            dc5 = sym('dc5');
            dc6 = sym('dc6');
            dc7 = sym('dc7');
            dc8 = sym('dc8');
            dc9 = sym('dc9');
            dc10 = sym('dc10');
            dc11 = sym('dc11');
            dc12 = sym('dc12');
            dc13 = sym('dc13');
            dc14 = sym('dc14');
            temp_dc = [dc1 dc2 dc3 dc4 dc5 dc6 dc7 dc8 dc9 dc10 dc11 dc12 dc13 dc14];
            iic1 = sym('iic1');
            iic2 = sym('iic2');
            iic3 = sym('iic3');
            iic4 = sym('iic4');
            iic5 = sym('iic5');
            iic6 = sym('iic6');
            iic7 = sym('iic7');
            iic8 = sym('iic8');
            iic9 = sym('iic9');
            iic10 = sym('iic10');
            iic11 = sym('iic11');
            iic12 = sym('iic12');
            iic13 = sym('iic13');
            iic14 = sym('iic14');
            temp_iic = [iic1 iic2 iic3 iic4 iic5 iic6 iic7 iic8 iic9 iic10 iic11 iic12 iic13 iic14];
            dd1 = sym('dd1');
            dd2 = sym('dd2');
            dd3 = sym('dd3');
            dd4 = sym('dd4');
            dd5 = sym('dd5');
            dd6 = sym('dd6');
            dd7 = sym('dd7');
            dd8 = sym('dd8');
            dd9 = sym('dd9');
            dd10 = sym('dd10');
            dd11 = sym('dd11');
            dd12 = sym('dd12');
            dd13 = sym('dd13');
            dd14 = sym('dd14');
            temp_dd = [dd1 dd2 dd3 dd4 dd5 dd6 dd7 dd8 dd9 dd10 dd11 dd12 dd13 dd14];
            dii1 = sym('dii1');
            dii2 = sym('dii2');
            dii3 = sym('dii3');
            dii4 = sym('dii4');
            dii5 = sym('dii5');
            dii6 = sym('dii6');
            dii7 = sym('dii7');
            dii8 = sym('dii8');
            dii9 = sym('dii9');
            dii10 = sym('dii10');
            dii11 = sym('dii11');
            dii12 = sym('dii12');
            dii13 = sym('dii13');
            dii14 = sym('dii14');
            temp_dii = [dii1 dii2 dii3 dii4 dii5 dii6 dii7 dii8 dii9 dii10 dii11 dii12 dii13 dii14];
            
            w_gfl = zeros(1,width(x));
            for i = 1:width(x)
                w_gfl(1,i) = vpa(subs(w_sym(bus-n_gfm),[temp_dd(1:n_gfm) temp_dii(n_gfm+1:n_gfm+n_gfl) temp_dc(1:n_gfm) temp_iic(n_gfm+1:n_gfm+n_gfl)],x(1:end-1,i)'));
            end
        end
else
    dc1 = sym('dc1');
    dc2 = sym('dc2');
    dc3 = sym('dc3');
    dc4 = sym('dc4');
    dc5 = sym('dc5');
    dc6 = sym('dc6');
    dc7 = sym('dc7');
    dc8 = sym('dc8');
    dc9 = sym('dc9');
    dc10 = sym('dc10');
    dc11 = sym('dc11');
    dc12 = sym('dc12');
    dc13 = sym('dc13');
    dc14 = sym('dc14');
    temp_dc = [dc1 dc2 dc3 dc4 dc5 dc6 dc7 dc8 dc9 dc10 dc11 dc12 dc13 dc14];
    iic1 = sym('iic1');
    iic2 = sym('iic2');
    iic3 = sym('iic3');
    iic4 = sym('iic4');
    iic5 = sym('iic5');
    iic6 = sym('iic6');
    iic7 = sym('iic7');
    iic8 = sym('iic8');
    iic9 = sym('iic9');
    iic10 = sym('iic10');
    iic11 = sym('iic11');
    iic12 = sym('iic12');
    iic13 = sym('iic13');
    iic14 = sym('iic14');
    temp_iic = [iic1 iic2 iic3 iic4 iic5 iic6 iic7 iic8 iic9 iic10 iic11 iic12 iic13 iic14];
    dd1 = sym('dd1');
    dd2 = sym('dd2');
    dd3 = sym('dd3');
    dd4 = sym('dd4');
    dd5 = sym('dd5');
    dd6 = sym('dd6');
    dd7 = sym('dd7');
    dd8 = sym('dd8');
    dd9 = sym('dd9');
    dd10 = sym('dd10');
    dd11 = sym('dd11');
    dd12 = sym('dd12');
    dd13 = sym('dd13');
    dd14 = sym('dd14');
    temp_dd = [dd1 dd2 dd3 dd4 dd5 dd6 dd7 dd8 dd9 dd10 dd11 dd12 dd13 dd14];
    dii1 = sym('dii1');
    dii2 = sym('dii2');
    dii3 = sym('dii3');
    dii4 = sym('dii4');
    dii5 = sym('dii5');
    dii6 = sym('dii6');
    dii7 = sym('dii7');
    dii8 = sym('dii8');
    dii9 = sym('dii9');
    dii10 = sym('dii10');
    dii11 = sym('dii11');
    dii12 = sym('dii12');
    dii13 = sym('dii13');
    dii14 = sym('dii14');
    temp_dii = [dii1 dii2 dii3 dii4 dii5 dii6 dii7 dii8 dii9 dii10 dii11 dii12 dii13 dii14];

    w_gfl = vpa(subs(w_sym,[temp_dd(1:n_gfm) temp_dii(n_gfm+1:n_gfm+n_gfl) temp_dc(1:n_gfm) temp_iic(n_gfm+1:n_gfm+n_gfl)],x(1:end-1)'));
end
end